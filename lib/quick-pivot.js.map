{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///webpack/bootstrap 3a1213ffc4122f15baf0","webpack:///./src/index.js","webpack:///./src/logic.js","webpack:///./src/progressiveDiscovery.js"],"names":["Pivot","data","rows","cols","agg","type","header","originalData","collapsedRows","rowNum","returnedData","table","row","collapsed","uncollapsed","rawData","fixDataFormat","groupByCategory","groupByCategories","createColumnHeaders","accumulator","checkPivotCategories","tableCreator","Array","isArray","length","reduce","dataCol","i","arr","push","acc","curr","index","groupBy","category","groups","filter","ele","groupCopy","Object","assign","groupedData","shift","groupedDataKeys","keys","children","map","el","firstColumn","columnHeaders","mapToHeader","mapPos","columnHeaderRecursion","pos","headerMap","currKeys","reqLength","currLength","concat","fill","accCat","accType","accValue","array","Number","actualCats","selectedCats","errMessage","forEach","indexOf","selectedCat","Error","join","accCatOrCB","accTypeOrInitVal","rowHeader","columnData","headerLength","formattedColumnHeaders","value","depth","dataRows","prevKey","rowRecurse","rowGroups","rowHeaders","key","recursedData","recurseThroughMap","dataPos","datum","rawDataDatum","innerKey","rowHeaderValue","dataGroups","slice","collapse","expand","selectedRow","count","currDepth","currData","splice"],"mappings":"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","file":"quick-pivot.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine(\"quick-pivot\", [], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"quick-pivot\"] = factory();\n\telse\n\t\troot[\"quick-pivot\"] = factory();\n})(this, function() {\nreturn \n\n\n/** WEBPACK FOOTER **\n ** webpack/universalModuleDefinition\n **/"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n/** WEBPACK FOOTER **\n ** webpack/bootstrap 3a1213ffc4122f15baf0\n **/","import { tableCreator } from './logic';\nimport { collapse, expand } from './progressiveDiscovery.js';\n\nexport default class Pivot {\n\n  constructor(data, rows, cols, agg, type, header) {\n    if (!data) {\n      this.originalData = {};\n    }else {\n      this.originalData = tableCreator(data, rows, cols, agg, type, header);\n    }\n\n    this.data = this.originalData;\n    this.collapsedRows = {};\n  }\n\n  update(data, rows, cols, agg, type, header) {\n    this.originalData = tableCreator(data, rows, cols, agg, type, header);\n    this.data = this.originalData;\n  }\n\n  collapse(rowNum) {\n    let returnedData = collapse(rowNum, this.data);\n\n    this.collapsedRows[this.data.table[rowNum].row] =\n        returnedData.collapsed;\n    this.data = returnedData.uncollapsed;\n    return this;\n  }\n\n  expand(rowNum) {\n    this.data = expand(\n      rowNum,\n      this.data,\n      this.collapsedRows[this.data.table[rowNum].row],\n    );\n    delete this.collapsedRows[this.data.table[rowNum].row];\n    return this;\n  }\n\n  getData(rowNum) {\n    if (!this.data.table[rowNum]) return null;\n    if (this.collapsedRows[this.data.table[rowNum].row]) {\n      return this.collapsedRows[this.data.table[rowNum].row].rawData;\n    }\n\n    return this.originalData.rawData[this.data.table[rowNum].row];\n  }\n\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./~/eslint-loader!./src/index.js\n **/","'use strict';\n\nexport function fixDataFormat(data) {\n  if (!Array.isArray(data) || !data.length) return [];\n  else if (typeof data[0] === 'object' && !Array.isArray(data[0])) return data;\n  return data.reduce((dataCol, row, i, arr) => {\n    if (i !== 0) {\n      if (Array.isArray(row)) {\n        dataCol.push(row.reduce((acc, curr, index) =>{\n          acc[arr[0][index]] = curr;\n          return acc;\n        }, {}));\n      } else {\n        dataCol.push({[arr[0]]: row});\n      }\n    }\n    return dataCol;\n  }, []);\n}\n\nexport function groupByCategory(data, groupBy) {\n  return data.reduce((acc, curr) =>{\n    var category = curr[groupBy];\n\n    if (!acc[category]) acc[category] = [];\n    acc[category].push(curr);\n    return acc;\n  }, {});\n}\n\nexport function groupByCategories(data, groups = [], acc = {}) {\n  if (!data.length) return [];\n\n  groups = groups.filter(ele =>{\n    return ele in data[0];\n  });\n\n  if (!groups.length) return data;\n\n  var groupCopy = Object.assign([], groups);\n  var groupedData = groupByCategory(data, groupCopy.shift());\n  var groupedDataKeys = Object.keys(groupedData);\n  var children = groupedDataKeys.map(el => {\n    return groupedData[el];\n  });\n\n  for (let i = 0; i < children.length; i++) {\n    acc[groupedDataKeys[i]] = groupCopy.length ? {} : [];\n    acc[groupedDataKeys[i]] = groupByCategories(\n        children[i], groupCopy, acc[groupedDataKeys[i]]);\n  }\n\n  return acc;\n}\n\nexport function createColumnHeaders(data, cols = [], firstColumn = '') {\n  if (!cols.length) return {columnHeaders: [firstColumn], mapToHeader: 1};\n\n  var groupedData = groupByCategories(data, cols);\n  var columnHeaders = [];\n  var mapToHeader = Object.assign({}, groupedData);\n  var mapPos = 1;\n\n  (function columnHeaderRecursion(data, pos = 0, headerMap) {\n    if (typeof data !== 'object' || Array.isArray(data)) return 1;\n\n    var currKeys = Object.keys(data);\n    var reqLength = 0;\n\n    for (let i = 0; i < currKeys.length; i++) {\n      let currLength = columnHeaderRecursion(\n          data[currKeys[i]], pos + 1, headerMap[currKeys[i]]);\n\n      if (Array.isArray(data[currKeys[i]])) {\n        headerMap[currKeys[i]] = mapPos;\n        mapPos += 1;\n      }\n      reqLength += currLength;\n      columnHeaders[pos] = !columnHeaders[pos] ?\n          [firstColumn].concat(Array(currLength).fill(currKeys[i])) :\n          columnHeaders[pos].concat(Array(currLength).fill(currKeys[i]));\n    }\n    return reqLength;\n\n  })(groupedData, 0, mapToHeader);\n\n  return {\n    columnHeaders,\n    mapToHeader,\n  };\n}\n\n/**\n * accumulator has two different signatures\n * 1. it takes an array of objects, an accumulation category as a string\n *  (like age), and supported accumulation type as a string (like count)\n * 2. it takes an array of objects, a callback function (which operates\n *  the same as reduce), and an initial value\n */\nexport function accumulator(arr, accCat, accType, accValue) {\n  if (!accCat && typeof accType !== 'function') accType = 'count';\n  else if (typeof accCat === 'function') {\n    accValue = accType || 0;\n    accType = accCat;\n  }\n\n  return arr.reduce((acc, curr, index, array) => {\n    if (typeof accType === 'function') {\n      return accType(acc, typeof accCat === 'string' ? curr[accCat] :\n                                                       curr, index, array);\n    }\n    switch (accType) {\n      case ('sum'): {\n        acc += Number(curr[accCat]);\n        return acc;\n      }\n\n      case ('count'): {\n        acc += 1;\n        return acc;\n      }\n\n      default: {\n        acc += 1;\n        return acc;\n      }\n    }\n  }, accValue || 0);\n}\n\nexport function checkPivotCategories(actualCats, selectedCats) {\n  var errMessage = [];\n\n  selectedCats.forEach(selectedCat =>{\n    if (actualCats.indexOf(selectedCat) === -1) errMessage.push(selectedCat);\n  });\n  if (errMessage.length) {\n    throw new Error(\n        `Check that these selected pivot categories exist: ${errMessage.join(\n            ',')}`);\n  }\n}\n\nexport function tableCreator(\n  data, rows = [], cols = [], accCatOrCB, accTypeOrInitVal, rowHeader) {\n  data = fixDataFormat(data);\n  if (!data.length) return [];\n  checkPivotCategories(Object.keys(data[0]), rows);\n  checkPivotCategories(Object.keys(data[0]), cols);\n\n  if (typeof rowHeader === 'undefined') {\n    rowHeader = typeof accCatOrCB !== 'function' ?\n        `${accTypeOrInitVal} ${accCatOrCB}` :\n        'Custom Agg';\n  }\n\n  const columnData = createColumnHeaders(data, cols, rowHeader);\n  const columnHeaders = Array.isArray(columnData.columnHeaders[0]) ?\n      columnData.columnHeaders :\n      [columnData.columnHeaders.concat(rowHeader)];\n  const mapToHeader = columnData.mapToHeader;\n  const headerLength = columnHeaders[0].length;\n  const formattedColumnHeaders = columnHeaders.map((value, depth) => {\n    return {\n      value,\n      depth,\n      type: 'colHeader',\n      row: depth,\n    };\n  });\n\n  let dataRows = [];\n  let rawData = [];\n  let prevKey = '';\n\n  function rowRecurse(rowGroups, depth, rowHeaders = []) {\n    for (let key in rowGroups) {\n      if (Array.isArray(rowGroups[key])) {\n        var recursedData = groupByCategories(rowGroups[key], cols);\n\n        (function recurseThroughMap(dataPos, map) {\n          if (Array.isArray(dataPos)) {\n            if (key === prevKey) {\n              let datum = dataRows[dataRows.length - 1].value;\n\n              datum[map] = accumulator(dataPos, accCatOrCB, accTypeOrInitVal);\n              dataRows[dataRows.length - 1].value = datum;\n\n              let rawDataDatum = rawData[rawData.length - 1].value;\n\n              rawDataDatum[map] = dataPos;\n              rawData[rawData.length - 1].value = rawDataDatum;\n            } else {\n              prevKey = key;\n              let datum = [key].concat(\n                  Array(map - 1).fill(''),\n                  accumulator(dataPos, accCatOrCB, accTypeOrInitVal),\n                  Array(headerLength - (map + 1)).fill(''));\n              let rawDataDatum = [key].concat(\n                Array(map - 1).fill(''),\n                [dataPos],\n                Array(headerLength - (map + 1)).fill(''));\n\n              rawData.push({\n                value: rawDataDatum,\n                type: 'data',\n                depth,\n              });\n              dataRows.push({\n                value: datum,\n                type: 'data',\n                depth,\n                row: dataRows.length + formattedColumnHeaders.length,\n              });\n            }\n          } else {\n            for (let innerKey in dataPos) {\n              recurseThroughMap(dataPos[innerKey], map[innerKey]);\n            }\n          }\n        })(recursedData, mapToHeader || 1);\n\n      } else {\n        const rowHeaderValue = rowHeaders.shift();\n        const value = rowHeaderValue ?\n            rowHeaderValue.value :\n            [key].concat(Array(headerLength - 1).fill(''));\n\n        dataRows.push({\n          value,\n          depth,\n          type: 'rowHeader',\n          row: dataRows.length + formattedColumnHeaders.length,\n        });\n        rawData.push({\n          value,\n          depth,\n          type: 'rowHeader',\n        });\n\n        rowRecurse(rowGroups[key], depth + 1, rowHeaders);\n      }\n    }\n  }\n\n  let dataGroups = [];\n\n  if (rows.length > 0) {\n    for (let i = 0; i < rows.length; i++) {\n      // possible memoization opportunity\n      rowRecurse(groupByCategories(data, rows.slice(0, i + 1)), 0, dataGroups);\n      dataGroups = Object.assign([], dataRows);\n      if (i + 1 < rows.length) {\n        dataRows = [];\n        rawData = [];\n        prevKey = '';\n      }\n    }\n  } else if (cols.length > 0) {\n    for (let i = 0; i < cols.length; i++) {\n      rowRecurse(groupByCategories(data, cols.slice(0, i + 1)), 0, dataGroups);\n      dataGroups = Object.assign([], dataRows);\n      if (i + 1 < cols.length) {\n        dataRows = [];\n        rawData = [];\n        prevKey = '';\n      }\n    }\n  } else {\n    dataRows.push({\n      value: [rowHeader, accumulator(data, accCatOrCB, accTypeOrInitVal)],\n      type: 'data',\n      row: 1,\n      depth: 0,\n    });\n    rawData = data.map((value) => {\n      return {\n        value,\n        type: 0,\n        row: 1,\n        depth: 0,\n      };\n    });\n  }\n\n  return {\n    table: formattedColumnHeaders.concat(dataRows),\n    rawData: formattedColumnHeaders.concat(rawData),\n  };\n\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./~/eslint-loader!./src/logic.js\n **/","'use strict';\n\nexport function collapse(rowNum, data) {\n  const selectedRow = data.table[rowNum];\n  const {type, depth} = selectedRow;\n\n  if (type !== 'rowHeader' && type !== 'colHeader') {\n    return {\n      uncollapsed: data,\n    };\n  }\n\n  let count = rowNum + 1;\n  let currDepth = data.table[count].depth;\n  let uncollapsed = {\n    table: data.table.slice(0, count),\n    rawData: data.rawData.slice(0, count),\n  };\n\n  let collapsed = {\n    table: [],\n    rawData: [],\n  };\n\n  while (count < data.table.length && currDepth > depth) {\n    collapsed.rawData.push(data.rawData[count]);\n    collapsed.table.push(data.table[count]);\n    count += 1;\n    if (count < data.table.length) currDepth = data.table[count].depth;\n  }\n\n  uncollapsed.table = uncollapsed.table.concat(data.table.slice(count));\n  uncollapsed.rawData = uncollapsed.rawData.concat(data.rawData.slice(count));\n\n  return {\n    uncollapsed,\n    collapsed,\n  };\n}\n\nexport function expand(rowNum, currData, collapsedRows) {\n  if (!collapsedRows) return currData;\n  currData.table.splice(rowNum + 1, 0, ...collapsedRows.table);\n  currData.rawData.splice(rowNum + 1, 0, ...collapsedRows.rawData);\n  return currData;\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./~/eslint-loader!./src/progressiveDiscovery.js\n **/"],"sourceRoot":""}