!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define("quick-pivot",[],t):"object"==typeof exports?exports["quick-pivot"]=t():e["quick-pivot"]=t()}(this,function(){return function(e){function t(r){if(a[r])return a[r].exports;var n=a[r]={exports:{},id:r,loaded:!1};return e[r].call(n.exports,n,n.exports,t),n.loaded=!0,n.exports}var a={};return t.m=e,t.c=a,t.p="",t(0)}([function(e,t,a){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}(),o=a(1),i=a(2),l=function(){function e(t,a,n,i,l,u){r(this,e),t?this.originalData=(0,o.tableCreator)(t,a,n,i,l,u):this.originalData={},this.data=this.originalData,this.collapsedRows={}}return n(e,[{key:"update",value:function(e,t,a,r,n,i){return this.originalData=(0,o.tableCreator)(e,t,a,r,n,i),this.data=this.originalData,this}},{key:"collapse",value:function(e){var t=(0,i.collapse)(e,this.data);return this.collapsedRows[this.data.table[e].row]=t.collapsed,this.data=t.uncollapsed,this}},{key:"expand",value:function(e){return this.data=(0,i.expand)(e,this.data,this.collapsedRows[this.data.table[e].row]),delete this.collapsedRows[this.data.table[e].row],this}},{key:"toggle",value:function(e){return e in this.collapsedRows?this.expand(e):this.collapse(e)}},{key:"getData",value:function(e){return this.data.table[e]?this.collapsedRows[this.data.table[e].row]?this.collapsedRows[this.data.table[e].row].rawData:this.originalData.rawData[this.data.table[e].row]:null}}]),e}();t["default"]=l,e.exports=t["default"]},function(e,t){"use strict";function a(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function r(e){return Array.isArray(e)&&e.length?"object"!==s(e[0])||Array.isArray(e[0])?e.reduce(function(e,t,r,n){return 0!==r&&(Array.isArray(t)?e.push(t.reduce(function(e,t,a){return e[n[0][a]]=t,e},{})):e.push(a({},n[0],t))),e},[]):e:[]}function n(e,t){return e.reduce(function(e,a){var r=a[t];return e[r]||(e[r]=[]),e[r].push(a),e},{})}function o(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!e.length)return[];if(t=t.filter(function(t){return t in e[0]}),!t.length)return e;for(var r=Object.assign([],t),i=n(e,r.shift()),l=Object.keys(i),u=l.map(function(e){return i[e]}),c=0;c<u.length;c++)a[l[c]]=r.length?{}:[],a[l[c]]=o(u[c],r,a[l[c]]);return a}function i(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";if(!t.length)return{columnHeaders:[a],mapToHeader:1};var r=o(e,t),n=[],i=Object.assign({},r),l=1;return function u(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments[2];if("object"!==("undefined"==typeof e?"undefined":s(e))||Array.isArray(e))return 1;for(var o=Object.keys(e),i=0,c=0;c<o.length;c++){var f=u(e[o[c]],t+1,r[o[c]]);Array.isArray(e[o[c]])&&(r[o[c]]=l,l+=1),i+=f,n[t]=n[t]?n[t].concat(Array(f).fill(o[c])):[a].concat(Array(f).fill(o[c]))}return i}(r,0,i),{columnHeaders:n,mapToHeader:i}}function l(e,t,a,r){return t||"function"==typeof a?"function"==typeof t&&(r=a||0,a=t):a="count",e.reduce(function(e,r,n,o){if("function"==typeof a)return a(e,"string"==typeof t?r[t]:r,n,o);switch(a){case"sum":return e+=Number(r[t]);case"count":return e+=1;default:return e+=1}},r||0)}function u(e,t){var a=[];if(t.forEach(function(t){e.indexOf(t)===-1&&a.push(t)}),a.length)throw new Error("Check that these selected pivot categories exist: "+a.join(","))}function c(e){function t(e,a){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=function(i){if(Array.isArray(e[i])){var u=o(e[i],n);w="",function h(e,t){if(Array.isArray(e))if(i===w){var r=g[g.length-1].value;r[t]=l(e,c,s),g[g.length-1].value=r;var n=b[b.length-1].value;n[t]=e,b[b.length-1].value=n}else{w=i;var o=[i].concat(Array(t-1).fill(""),l(e,c,s),Array(y-(t+1)).fill("")),u=[i].concat(Array(t-1).fill(""),[e],Array(y-(t+1)).fill(""));b.push({value:u,type:"data",depth:a}),g.push({value:o,type:"data",depth:a,row:g.length+v.length})}else for(var f in e)h(e[f],t[f])}(u,d||1)}else{var f=r.shift(),p=f?f.value:[i].concat(Array(y-1).fill(""));g.push({value:p,depth:a,type:"rowHeader",row:g.length+v.length}),b.push({value:p,depth:a,type:"rowHeader"}),t(e[i],a+1,r)}};for(var u in e)i(u)}var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],c=arguments[3],s=arguments[4],f=arguments[5];if(e=r(e),!e.length)return[];u(Object.keys(e[0]),a),u(Object.keys(e[0]),n),"undefined"==typeof f&&(f="function"!=typeof c?s+" "+c:"Custom Agg");var p=i(e,n,f),h=Array.isArray(p.columnHeaders[0])?p.columnHeaders:[p.columnHeaders.concat(f)],d=p.mapToHeader,y=h[0].length,v=h.map(function(e,t){return{value:e,depth:t,type:"colHeader",row:t}}),g=[],b=[],w="",m=[];if(a.length>0)for(var A=0;A<a.length;A++)t(o(e,a.slice(0,A+1)),0,m),m=Object.assign([],g),A+1<a.length&&(g=[],b=[],w="");else if(n.length>0)for(var D=0;D<n.length;D++)t(o(e,n.slice(0,D+1)),0,m),m=Object.assign([],g),D+1<n.length&&(g=[],b=[],w="");else g.push({value:[f,l(e,c,s)],type:"data",row:1,depth:0}),b=e.map(function(e){return{value:e,type:0,row:1,depth:0}});return{table:v.concat(g),rawData:v.concat(b)}}Object.defineProperty(t,"__esModule",{value:!0});var s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};t.fixDataFormat=r,t.groupByCategory=n,t.groupByCategories=o,t.createColumnHeaders=i,t.accumulator=l,t.checkPivotCategories=u,t.tableCreator=c},function(e,t){"use strict";function a(e){if(Array.isArray(e)){for(var t=0,a=Array(e.length);t<e.length;t++)a[t]=e[t];return a}return Array.from(e)}function r(e,t){var a=t.table[e],r=a.type,n=a.depth;if("rowHeader"!==r&&"colHeader"!==r)return{uncollapsed:t};for(var o=e+1,i=t.table[o].depth,l={table:t.table.slice(0,o),rawData:t.rawData.slice(0,o)},u={table:[],rawData:[]};o<t.table.length&&i>n;)u.rawData.push(t.rawData[o]),u.table.push(t.table[o]),o+=1,o<t.table.length&&(i=t.table[o].depth);return l.table=l.table.concat(t.table.slice(o)),l.rawData=l.rawData.concat(t.rawData.slice(o)),{uncollapsed:l,collapsed:u}}function n(e,t,r){var n,o;return r?((n=t.table).splice.apply(n,[e+1,0].concat(a(r.table))),(o=t.rawData).splice.apply(o,[e+1,0].concat(a(r.rawData))),t):t}Object.defineProperty(t,"__esModule",{value:!0}),t.collapse=r,t.expand=n}])});
//# sourceMappingURL=quick-pivot.min.js.map